<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Belize: An Elemental Journey</title>
    
    <!-- We begin with the foundational medium for our canvas -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* 
         * The design philosophy is rooted in harmony and purpose. 
         * Every element, every motion, every shade exists for a reason.
         * We use the system's own typeface for a seamless, integrated feel. It should feel native, inevitable.
        */
        :root {
            --abyss-blue: #001a29;
            --ocean-teal: #007a8a;
            --sand-white: #f7f5f2;
            --glow-cyan: #7fffd4;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --shadow-color: rgba(0, 0, 0, 0.5);
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-color: var(--abyss-blue);
            font-family: var(--font-family);
        }

        /* 
         * The Introduction.
         * This is not a loading screen. It is a moment of stillness before the journey.
         * A gentle, breathing gradient that evokes the horizon where the sea meets the sky.
        */
        #introduction {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(315deg, #001219, #00384d, #005f73);
            background-size: 400% 400%;
            animation: gradient-flow 15s ease infinite;
            opacity: 1;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #introduction h1 {
            font-size: 2.5rem;
            font-weight: 200;
            color: var(--sand-white);
            letter-spacing: 0.2rem;
            margin: 0;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        #introduction p {
            font-size: 1rem;
            font-weight: 300;
            color: var(--text-secondary);
            margin-top: 1rem;
            letter-spacing: 0.1rem;
            animation: fade-in 2s ease-in-out;
        }
        
        #introduction.hidden {
            opacity: 0;
            pointer-events: none;
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* 
         * The Canvas.
         * The map is our canvas, intentionally muted. It provides context, not distraction.
         * We use a CSS filter to create a custom monochromatic theme that feels cohesive.
        */
        #map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-color: var(--abyss-blue);
        }
        
        .leaflet-tile-pane {
            /* Desaturate and shift the color palette to our theme. A simple, powerful gesture. */
            filter: grayscale(1) brightness(0.9) sepia(0.2) hue-rotate(180deg) saturate(1.5) contrast(1.1);
        }

        /* 
         * The Markers.
         * Not pins. Beacons. A gentle pulse of light that signifies a point of interest.
         * It breathes, drawing the eye without shouting.
        */
        .leaflet-marker-icon {
            border-radius: 50%;
            background-color: rgba(127, 255, 212, 0.7); /* Aquamarine */
            box-shadow: 0 0 12px 2px var(--glow-cyan), 0 0 0 4px rgba(0, 26, 41, 0.7);
            animation: pulse 2.5s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        .leaflet-marker-icon.active {
            transform: scale(1.5);
            animation-play-state: paused;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 20px 5px #fff, 0 0 0 4px rgba(0, 26, 41, 0.7);
        }

        @keyframes pulse {
            0% { transform: scale(0.9); box-shadow: 0 0 12px 2px var(--glow-cyan), 0 0 0 4px rgba(0, 26, 41, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 18px 5px var(--glow-cyan), 0 0 0 4px rgba(0, 26, 41, 0.7); }
            100% { transform: scale(0.9); box-shadow: 0 0 12px 2px var(--glow-cyan), 0 0 0 4px rgba(0, 26, 41, 0.7); }
        }
        
        /* We remove the default UI, replacing it with our own thoughtful implementation. */
        .leaflet-control-container {
            display: none;
        }

        /* 
         * The Information Panel.
         * A pane of frosted glass that glides into view, revealing the essence of a location.
         * The material is translucent, maintaining a connection to the world behind it.
        */
        #info-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 45vh;
            max-height: 400px;
            background-color: rgba(0, 26, 41, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-top: 1px solid rgba(127, 255, 212, 0.2);
            color: var(--sand-white);
            transform: translateY(100%);
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 1000;
            display: flex;
            box-shadow: 0 -10px 40px var(--shadow-color);
            visibility: hidden;
        }
        
        #info-panel.visible {
            transform: translateY(0);
            visibility: visible;
        }
        
        #panel-image {
            width: 50%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transform: scale(1.1);
            transition: opacity 1s ease 0.3s, transform 1s ease 0.3s;
        }

        #info-panel.visible #panel-image {
            opacity: 1;
            transform: scale(1);
        }

        #panel-content {
            width: 50%;
            padding: 2rem 2.5rem;
            box-sizing: border-box;
            overflow-y: auto;
            position: relative;
        }

        #panel-content h2 {
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: 0.1rem;
            margin: 0 0 0.5rem 0;
            color: var(--sand-white);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease 0.5s, transform 0.6s ease 0.5s;
        }

        #panel-content .type {
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 0.2rem;
            text-transform: uppercase;
            color: var(--glow-cyan);
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease 0.6s, transform 0.6s ease 0.6s;
        }

        #panel-content p {
            font-size: 1rem;
            line-height: 1.7;
            font-weight: 300;
            color: var(--text-primary);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease 0.7s, transform 0.6s ease 0.7s;
        }

        #info-panel.visible #panel-content h2,
        #info-panel.visible #panel-content .type,
        #info-panel.visible #panel-content p {
            opacity: 1;
            transform: translateY(0);
        }
        
        #close-panel {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 30px;
            height: 30px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        #close-panel:hover {
            opacity: 1;
            transform: rotate(90deg);
        }
        #close-panel::before, #close-panel::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 24px;
            height: 1px;
            background-color: var(--sand-white);
        }
        #close-panel::before { transform: translate(-50%, -50%) rotate(45deg); }
        #close-panel::after { transform: translate(-50%, -50%) rotate(-45deg); }
        
        /* Responsive considerations. On smaller screens, the form must adapt with elegance. */
        @media (max-width: 768px) {
            #info-panel {
                flex-direction: column;
                height: 70vh;
                max-height: none;
            }
            #panel-image {
                width: 100%;
                height: 40%;
            }
            #panel-content {
                width: 100%;
                height: 60%;
                padding: 1.5rem;
            }
            #panel-content h2 { font-size: 1.5rem; }
            #panel-content p { font-size: 0.9rem; }
            #introduction h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <div id="introduction">
        <h1>BELIZE</h1>
        <p>An Elemental Journey</p>
    </div>

    <div id="map"></div>

    <div id="info-panel">
        <img id="panel-image" src="" alt="">
        <div id="panel-content">
            <h2 id="panel-title"></h2>
            <div id="panel-type" class="type"></div>
            <p id="panel-description"></p>
        </div>
        <div id="close-panel"></div>
    </div>

    <script>
        // The narrative begins here. Data is not just data; it is a collection of stories.
        // Images are summoned from the ether, ensuring the experience is light and immediate.
        const locations = [
            {
                name: "Great Blue Hole",
                type: "Marine Sinkhole",
                coords: [17.316, -87.535],
                description: "A colossal marine sinkhole, a portal to the ocean's underworld. Its perfect circular shape is a profound statement of geological time, inviting divers to explore its silent, ancient depths.",
                image: "https://images.unsplash.com/photo-1587870529598-a893e4a2c161?q=80&w=1964"
            },
            {
                name: "Hol Chan Marine Reserve",
                type: "Barrier Reef",
                coords: [17.861, -87.962],
                description: "A vibrant underwater thoroughfare, teeming with life. Here, the barrier reef parts, creating a channel where rays, sharks, and countless species congregate in a dazzling display of biodiversity.",
                image: "https://images.unsplash.com/photo-1552569434-53634a873894?q=80&w=1935"
            },
            {
                name: "Cockscomb Basin",
                type: "Wildlife Sanctuary",
                coords: [16.76, -88.58],
                description: "The world's first jaguar preserve. A sanctuary of dense jungle, cascading waterfalls, and the elusive spirits of the wild. The air is thick with the scent of earth and the sound of life.",
                image: "https://images.unsplash.com/photo-1547847055-a01b4991206c?q=80&w=1974"
            },
            {
                name: "Xunantunich",
                type: "Mayan Ruins",
                coords: [17.089, -89.141],
                description: "The 'Stone Woman' stands sentinel over the jungle. Ascend El Castillo to touch the sky and gaze upon a kingdom reclaimed by nature, a silent testament to a civilization's profound connection to the cosmos.",
                image: "https://images.unsplash.com/photo-1628160049448-b39178199344?q=80&w=1974"
            },
            {
                name: "ATM Cave",
                type: "Archaeological Site",
                coords: [17.186, -88.948],
                description: "Actun Tunichil Muknal. A journey into the Mayan underworld, a living museum of sacred ceremony. Traverse through water and darkness to find crystalized skeletons and echoes of ancient rituals.",
                image: "https://images.unsplash.com/photo-1565017240312-326b58e72764?q=80&w=2070"
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const introduction = document.getElementById('introduction');
            const mapContainer = document.getElementById('map');
            const infoPanel = document.getElementById('info-panel');
            const closePanelButton = document.getElementById('close-panel');
            const panelImage = document.getElementById('panel-image');
            const panelTitle = document.getElementById('panel-title');
            const panelType = document.getElementById('panel-type');
            const panelDescription = document.getElementById('panel-description');

            let map;
            let activeMarker = null;
            const markers = [];

            function initializeMap() {
                // The map is centered to reveal the whole of Belize, a gesture of presentation.
                map = L.map(mapContainer, {
                    zoomControl: false,
                    attributionControl: false,
                }).setView([17.1899, -88.4976], 8);

                // The tile layer is the very fabric of our canvas. We chose one that is clean and unobtrusive.
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
                
                // We now place our beacons onto the canvas.
                locations.forEach(location => {
                    const icon = L.divIcon({
                        className: 'leaflet-marker-icon',
                        iconSize: [20, 20]
                    });

                    const marker = L.marker(location.coords, { icon: icon }).addTo(map);
                    
                    marker.on('click', () => {
                        handleMarkerClick(marker, location);
                    });
                    
                    markers.push({marker, location});
                });
            }

            function handleMarkerClick(marker, location) {
                // A fluid transition to the point of interest.
                map.flyTo(location.coords, 11, {
                    animate: true,
                    duration: 1.5
                });
                
                // Manage the state of the beacons. Only one may be fully illuminated at a time.
                if (activeMarker) {
                    activeMarker.getElement().classList.remove('active');
                }
                marker.getElement().classList.add('active');
                activeMarker = marker;

                // The reveal of information is a choreographed sequence.
                // First, reset the state to ensure a clean animation every time.
                infoPanel.classList.remove('visible');

                // A brief pause allows the map to settle before the panel presentation begins.
                setTimeout(() => {
                    panelTitle.textContent = location.name;
                    panelType.textContent = location.type;
                    panelDescription.textContent = location.description;
                    panelImage.src = location.image;
                    panelImage.alt = location.name;
                    infoPanel.classList.add('visible');
                }, 500);
            }
            
            function closeInfoPanel() {
                infoPanel.classList.remove('visible');
                if (activeMarker) {
                    activeMarker.getElement().classList.remove('active');
                    activeMarker = null;
                }
                // A gentle retreat, returning focus to the whole.
                map.flyTo([17.1899, -88.4976], 8, {
                    animate: true,
                    duration: 1.0
                });
            }

            // The experience begins with a single, intentional gesture.
            introduction.addEventListener('click', () => {
                introduction.classList.add('hidden');
                // The map should not exist until it is summoned.
                setTimeout(initializeMap, 500); 
            }, { once: true });
            
            closePanelButton.addEventListener('click', closeInfoPanel);
            
            mapContainer.addEventListener('click', (e) => {
                // If one clicks away from a beacon, the focus should return to the whole.
                if (e.target.classList.contains('leaflet-container')) {
                    closeInfoPanel();
                }
            });
        });
    </script>
</body>
</html>
